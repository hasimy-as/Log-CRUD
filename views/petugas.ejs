<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <link rel="stylesheet" href="css/navStyle.css" />
    <link rel="stylesheet" href="css/homeStyle.css" />
    <link rel="stylesheet" href="css/semantic.min.css" />
    <link rel="stylesheet" href="css/bootstrap.min.css" />
    <title>Petugas | Tata Tertib Siswa</title>
</head>

<body>
    <%- include ("assets/navbar.ejs") %>
    <div>
        <div class="ui container">
            <br />
            <h1 class="text-center">Daftar Petugas</h1>
            <br />
            <div class="my-2">
                <table class="ui celled table">
                    <thead>
                        <tr>
                            <th>No</th>
                            <th>Nama</th>
                            <th>Email</th>
                            <th>Tugas</th>
                            <th>Aksi</th>
                        </tr>
                    </thead>
                    <tbody>
                        <% printP.forEach(function(data) { %>
                        <tr>
                            <td><%= data.id %></td>
                            <td><%= data.name %></td>
                            <td><%= data.email %></td>
                            <td><%= data.role %></td>
                            <td>
                                <a class="btn btn-danger btn-sm m-1" href="/hapusP/<%= data.id %>">Hapus</a>
                                <button type="button" class="btn btn-warning btn-sm m-1 edit-post" data-id="<%= data.id %>"
                                    data-name="<%= data.name %>" data-email="<%= data.email %>"
                                    data-role="<%= data.role %>">Edit</button>
                            </td>
                            <% }) %>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

<div id="editPostModal" class="modal fade">
    <div class="modal-dialog modal-dialog-centered modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title">Edit</div>
                <button type="button" class="close" data-dismiss="modal">&times;</button>
            </div>
            <div class="modal-body">
                <form action="/editP/:id" method="POST">
                    <input type="hidden" name="id" id="edit_id">
                    <div class="form-group">
                        <label for="nama_pelanggaran">Nama</label>
                        <input type="text" class="form-control" name="name">
                    </div>
                    <div class="form-group">
                        <label for="kategori">Email</label>
                        <input type="email" class="form-control" name="email">
                    </div>
                    <div class="form-group">
                        <label for="poin">Role</label>
                        <input type="text" class="form-control" name="role">
                    </div>
                    <div class="form-group text-center">
                        <button class="btn btn-primary" type="submit">Update!</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>

<script>
    $('.edit-post').on('click', function () {
        var id = $(this).data('id')
        var name = $(this).data('name')
        var email = $(this).data('email')
        var role = $(this).data('role')

        $('#editPostModal').modal('show')

        $('#edit_id').val(id)
        $('#edit_nama_pelanggaran').val(name)
        $('#edit_kategori').val(email)
        $('#edit_poin').val(role)
    })
</script>


</body>

</html>
